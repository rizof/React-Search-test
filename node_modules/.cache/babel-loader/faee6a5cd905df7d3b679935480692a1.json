{"ast":null,"code":"var _jsxFileName = \"/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js\";\nimport React, { useState } from 'react';\nimport ProductTable from './ProductTable.js';\nimport SearchBar from './SearchBar.js';\nimport ProductRow from './ProductRow.js';\nimport './FilterableProductTable.css';\nimport InfoUtileSpan from './InfoUtileSpan.js';\nimport ContentCart from './ContentCart.js';\n\nfunction createTableProducts(categoriesAndProduct, categories) {\n  const table = [];\n  let isEmpty = Object.keys(categories).length;\n\n  for (const property in categoriesAndProduct) {\n    if (isEmpty === 0 || categories.includes(property)) table.push( /*#__PURE__*/React.createElement(ProductTable, {\n      category: property,\n      key: property,\n      rows: categoriesAndProduct[property],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  return table;\n}\n\nfunction listProductsAndCategories(products, handleShoppingCart) {\n  const categoriesAndProduct = [];\n  let lastCategoriy = [];\n  products.map((product, index) => {\n    if (!lastCategoriy.includes(product.category)) {\n      lastCategoriy.push(product.category);\n      categoriesAndProduct[product.category] = [];\n    }\n\n    const name = product.stocked ? product.name : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 59\n      }\n    }, product.name);\n    const price = product.price;\n    categoriesAndProduct[product.category].push( /*#__PURE__*/React.createElement(ProductRow, {\n      key: index,\n      name: name,\n      price: price,\n      addCart: handleShoppingCart,\n      product: product,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }\n    }));\n    return categoriesAndProduct;\n  });\n  return categoriesAndProduct;\n}\n\nfunction FilterableProductTable({\n  productsObject\n}) {\n  const [filterText, setText] = useState(\"\");\n  const [inStockOnly, setStock] = useState(false);\n  const [products, setProducts] = useState(productsObject);\n  const [categories, setCategories] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [panier, setPanier] = useState(false);\n  const table = [];\n  let categoriesAndProduct = [];\n\n  const handleShoppingCart = function (product) {\n    let add = true;\n    console.log(cart);\n    cart.filter(prod => {\n      if (prod.id === product.id) add = false;\n    });\n    if (add == true) setCart([...cart, product]);\n  };\n\n  const handleRemoveCart = function (product) {\n    let dell = [...cart];\n    dell = dell.filter(prod => prod.id !== product.id);\n    setCart(dell);\n  };\n\n  const handleInFilterText = function (e) {\n    setText(e.target.value);\n  };\n\n  const handleInStockOnlyChange = function (e) {\n    setStock(e.target.checked);\n  };\n\n  const handlePanier = function () {\n    setPanier(panier = !panier);\n  };\n\n  const handleFilterChange = function (e) {\n    const result = productsObject.filter(product => {\n      if (e.currentTarget.type === \"checkbox\") {\n        handleInStockOnlyChange(e);\n        if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1) return false;\n        if (e.target.checked && !product.stocked) return false;\n      } else {\n        handleInFilterText(e);\n        if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1) return false;\n        if (inStockOnly && !product.stocked) return false;\n      }\n\n      return product;\n    });\n    setProducts(result);\n  };\n\n  categoriesAndProduct = listProductsAndCategories(products, handleShoppingCart);\n  table.push(createTableProducts(categoriesAndProduct, categories));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTopRightHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    filterText: filterText,\n    onFilter: handleFilterChange,\n    inStockOnly: inStockOnly,\n    shoppingContentCart: handleShoppingCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }))), panier && /*#__PURE__*/React.createElement(ContentCart, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 24\n    }\n  }), !panier && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTableProduct\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }, table[0].length === 0 ? /*#__PURE__*/React.createElement(InfoUtileSpan, {\n    info: \"Il n'y a pas de produit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 42\n    }\n  }) : table));\n}\n\nexport default FilterableProductTable;","map":{"version":3,"sources":["/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js"],"names":["React","useState","ProductTable","SearchBar","ProductRow","InfoUtileSpan","ContentCart","createTableProducts","categoriesAndProduct","categories","table","isEmpty","Object","keys","length","property","includes","push","listProductsAndCategories","products","handleShoppingCart","lastCategoriy","map","product","index","category","name","stocked","price","FilterableProductTable","productsObject","filterText","setText","inStockOnly","setStock","setProducts","setCategories","cart","setCart","panier","setPanier","add","console","log","filter","prod","id","handleRemoveCart","dell","handleInFilterText","e","target","value","handleInStockOnlyChange","checked","handlePanier","handleFilterChange","result","currentTarget","type","toLowerCase","indexOf"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport ProductTable from './ProductTable.js' \nimport SearchBar from './SearchBar.js'\nimport ProductRow from './ProductRow.js'\nimport './FilterableProductTable.css'\nimport InfoUtileSpan from './InfoUtileSpan.js'\nimport ContentCart from './ContentCart.js'\n\nfunction createTableProducts(categoriesAndProduct, categories){\n    const table = []\n    let isEmpty = Object.keys(categories).length\n    for (const property in categoriesAndProduct) {\n            if (isEmpty === 0|| categories.includes(property)) \n                table.push(\n                    <ProductTable \n                        category = {property}\n                        key={property}\n                        rows={categoriesAndProduct[property]}\n                    />\n                )\n     }\n     return table\n}\n\nfunction listProductsAndCategories (products, handleShoppingCart) {\n    const categoriesAndProduct = []\n    let lastCategoriy = []\n\n    products.map((product, index) => {\n            if (!lastCategoriy.includes(product.category)){\n                lastCategoriy.push(product.category)\n                categoriesAndProduct[product.category] = []\n            }\n            const name = product.stocked ? product.name : <span className='danger'>{product.name}</span>\n            const price = product.price \n            categoriesAndProduct[product.category].push(\n                <ProductRow \n                    key={index} \n                    name={name}\n                    price={price}\n                    addCart={handleShoppingCart}\n                    product={product}\n                />\n            )\n        return categoriesAndProduct\n    })\n    return categoriesAndProduct\n}\n\nfunction FilterableProductTable ({productsObject}) {\n    const [filterText, setText] = useState(\"\")\n    const [inStockOnly, setStock] = useState(false)\n    const [products, setProducts] = useState(productsObject)\n    const [categories, setCategories] = useState([])\n    const [cart, setCart] = useState([])\n    const [panier, setPanier] = useState(false)\n    const table = [] \n    let categoriesAndProduct = []\n\n    const handleShoppingCart = function (product) {\n        let add = true\n        console.log(cart)\n\n        cart.filter((prod) => {\n            if (prod.id === product.id)\n                add = false\n        })\n        if (add == true)\n            setCart ([...cart, product])\n    }\n\n    const handleRemoveCart = function (product) {\n        let dell = [...cart]\n        dell = dell.filter((prod) => prod.id !== product.id)\n        setCart (dell)\n    }\n\n    const handleInFilterText = function (e) {\n        setText (e.target.value)\n    }\n\n    const handleInStockOnlyChange = function (e) {\n        setStock (e.target.checked)\n    }\n\n    const handlePanier = function () {\n        setPanier (panier = !panier)\n    }\n    const handleFilterChange = function (e) {\n        const result = productsObject.filter(product => {\n            if (e.currentTarget.type === \"checkbox\")\n            {\n                handleInStockOnlyChange(e)\n                if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1)\n                    return false\n                if (e.target.checked && !product.stocked)\n                    return false\n            }\n            else\n            {\n                handleInFilterText(e)\n                if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1)\n                return false\n                if (inStockOnly && !product.stocked)\n                    return false\n            }\n            return product    \n        })\n        setProducts(result)\n    }\n    categoriesAndProduct = listProductsAndCategories(products, handleShoppingCart)\n    table.push(createTableProducts(categoriesAndProduct, categories))\n    return (\n        <>\n            <header>\n                        <div className=\"contentTopRightHeader\">            \n                            <SearchBar \n                                filterText={filterText} \n                                onFilter={handleFilterChange}\n                                inStockOnly={inStockOnly}\n                                shoppingContentCart={handleShoppingCart}\n                            />\n                            </div>\n            </header>\n            {panier && <ContentCart />}\n            {!panier &&\n            <div className=\"contentTableProduct\">\n                {table[0].length === 0 ? <InfoUtileSpan info={\"Il n'y a pas de produit\"}/> : table}\n            </div>}\n        </>\n    )\n}\n\nexport default FilterableProductTable;"]},"metadata":{},"sourceType":"module"}