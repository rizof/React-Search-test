{"ast":null,"code":"var _jsxFileName = \"/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js\";\nimport React, { useState } from 'react';\nimport ProductTable from './ProductTable.js';\nimport SearchBar from './SearchBar.js';\nimport ProductRow from './ProductRow.js';\nimport './FilterableProductTable.css';\nimport InfoUtileSpan from './InfoUtileSpan.js';\nimport ContentCart from './ContentCart.js';\nimport Cart from './Cart.js';\n\nfunction createTableProducts(categoriesAndProduct, categories) {\n  const table = [];\n  let isEmpty = Object.keys(categories).length;\n\n  for (const property in categoriesAndProduct) {\n    if (isEmpty === 0 || categories.includes(property)) table.push( /*#__PURE__*/React.createElement(ProductTable, {\n      category: property,\n      key: property,\n      rows: categoriesAndProduct[property],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  return table;\n}\n\nfunction listProductsAndCategories(products, handleShoppingCart) {\n  const categoriesAndProduct = [];\n  let lastCategoriy = [];\n  products.map((product, index) => {\n    if (!lastCategoriy.includes(product.category)) {\n      lastCategoriy.push(product.category);\n      categoriesAndProduct[product.category] = [];\n    }\n\n    const name = product.stocked ? product.name : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 59\n      }\n    }, product.name);\n    const price = product.price;\n    categoriesAndProduct[product.category].push( /*#__PURE__*/React.createElement(ProductRow, {\n      key: index,\n      name: name,\n      price: price,\n      addCart: handleShoppingCart,\n      product: product,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }\n    }));\n    return categoriesAndProduct;\n  });\n  return categoriesAndProduct;\n}\n\nfunction FilterableProductTable({\n  productsObject\n}) {\n  const [filterText, setText] = useState(\"\");\n  const [inStockOnly, setStock] = useState(false);\n  const [products, setProducts] = useState(productsObject);\n  const [categories, setCategories] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [panier, setPanier] = useState(false);\n  const table = [];\n  const tableCart = [];\n  let categoriesAndProduct = [];\n\n  const handleShoppingCart = function (product) {\n    let add = true;\n    cart.filter(prod => {\n      if (prod.id === product.id) add = false;\n      return true;\n    });\n    if (add === true) setCart([...cart, product]);\n  };\n\n  const handleRemoveCart = function (product) {\n    let dell = [...cart];\n    dell = dell.filter(prod => prod.id !== product.id);\n    setCart(dell);\n  };\n\n  const handleInFilterText = function (e) {\n    setText(e.target.value);\n  };\n\n  const handleInStockOnlyChange = function (e) {\n    setStock(e.target.checked);\n  };\n\n  const handlePanier = function () {\n    let currentPanier = !panier;\n    setPanier(currentPanier);\n  };\n\n  const handleFilterChange = function (e) {\n    const result = productsObject.filter(product => {\n      if (e.currentTarget.type === \"checkbox\") {\n        handleInStockOnlyChange(e);\n        if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1) return false;\n        if (e.target.checked && !product.stocked) return false;\n      } else {\n        handleInFilterText(e);\n        if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1) return false;\n        if (inStockOnly && !product.stocked) return false;\n      }\n\n      return product;\n    });\n    setProducts(result);\n  };\n\n  categoriesAndProduct = listProductsAndCategories(products, handleShoppingCart);\n  table.push(createTableProducts(categoriesAndProduct, categories));\n  cart.map((prod, index) => tableCart.push( /*#__PURE__*/React.createElement(ContentCart, {\n    key: index,\n    prod: prod,\n    del: handleRemoveCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 24\n    }\n  })));\n  console.log(tableCart);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTopRightHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    filterText: filterText,\n    onFilter: handleFilterChange,\n    inStockOnly: inStockOnly,\n    shoppingContentCart: handleShoppingCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(Cart, {\n    panier: handlePanier,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTableProduct\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, panier && /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 24\n    }\n  }, tableCart), !panier && table));\n}\n\nexport default FilterableProductTable;","map":{"version":3,"sources":["/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js"],"names":["React","useState","ProductTable","SearchBar","ProductRow","InfoUtileSpan","ContentCart","Cart","createTableProducts","categoriesAndProduct","categories","table","isEmpty","Object","keys","length","property","includes","push","listProductsAndCategories","products","handleShoppingCart","lastCategoriy","map","product","index","category","name","stocked","price","FilterableProductTable","productsObject","filterText","setText","inStockOnly","setStock","setProducts","setCategories","cart","setCart","panier","setPanier","tableCart","add","filter","prod","id","handleRemoveCart","dell","handleInFilterText","e","target","value","handleInStockOnlyChange","checked","handlePanier","currentPanier","handleFilterChange","result","currentTarget","type","toLowerCase","indexOf","console","log"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport ProductTable from './ProductTable.js' \nimport SearchBar from './SearchBar.js'\nimport ProductRow from './ProductRow.js'\nimport './FilterableProductTable.css'\nimport InfoUtileSpan from './InfoUtileSpan.js'\nimport ContentCart from './ContentCart.js'\nimport Cart from './Cart.js'\n\nfunction createTableProducts(categoriesAndProduct, categories){\n    const table = []\n    let isEmpty = Object.keys(categories).length\n    for (const property in categoriesAndProduct) {\n            if (isEmpty === 0|| categories.includes(property)) \n                table.push(\n                    <ProductTable \n                        category = {property}\n                        key={property}\n                        rows={categoriesAndProduct[property]}\n                    />\n                )\n     }\n     return table\n}\n\nfunction listProductsAndCategories (products, handleShoppingCart) {\n    const categoriesAndProduct = []\n    let lastCategoriy = []\n\n    products.map((product, index) => {\n            if (!lastCategoriy.includes(product.category)){\n                lastCategoriy.push(product.category)\n                categoriesAndProduct[product.category] = []\n            }\n            const name = product.stocked ? product.name : <span className='danger'>{product.name}</span>\n            const price = product.price \n            categoriesAndProduct[product.category].push(\n                <ProductRow \n                    key={index} \n                    name={name}\n                    price={price}\n                    addCart={handleShoppingCart}\n                    product={product}\n                />\n            )\n        return categoriesAndProduct\n    })\n    return categoriesAndProduct\n}\n\nfunction FilterableProductTable ({productsObject}) {\n    const [filterText, setText] = useState(\"\")\n    const [inStockOnly, setStock] = useState(false)\n    const [products, setProducts] = useState(productsObject)\n    const [categories, setCategories] = useState([])\n    const [cart, setCart] = useState([])\n    const [panier, setPanier] = useState(false)\n\n    const table = [] \n    const tableCart = []\n    let categoriesAndProduct = []\n\n    const handleShoppingCart = function (product) {\n        let add = true\n        \n        cart.filter((prod) => {\n            if (prod.id === product.id)\n                add = false\n            return true\n        })\n        if (add === true)\n            setCart ([...cart, product])\n    }\n\n    const handleRemoveCart = function (product) {\n        let dell = [...cart]\n        dell = dell.filter((prod) => prod.id !== product.id)\n        setCart (dell)\n    }\n\n    const handleInFilterText = function (e) {\n        setText (e.target.value)\n    }\n\n    const handleInStockOnlyChange = function (e) {\n        setStock (e.target.checked)\n    }\n\n    const handlePanier = function () {\n        let currentPanier = !panier\n        setPanier (currentPanier)\n    }\n\n    const handleFilterChange = function (e) {\n        const result = productsObject.filter(product => {\n            if (e.currentTarget.type === \"checkbox\")\n            {\n                handleInStockOnlyChange(e)\n                if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1)\n                    return false\n                if (e.target.checked && !product.stocked)\n                    return false\n            }\n            else\n            {\n                handleInFilterText(e)\n                if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1)\n                return false\n                if (inStockOnly && !product.stocked)\n                    return false\n            }\n            return product    \n        })\n        setProducts(result)\n    }\n    categoriesAndProduct = listProductsAndCategories(products, handleShoppingCart)\n    table.push(createTableProducts(categoriesAndProduct, categories))\n    cart.map((prod, index) => \n        tableCart.push(<ContentCart key={index} prod={prod} del={handleRemoveCart}/>)\n    )\n    console.log(tableCart)\n    return (\n        <>\n            <header>\n                        <div className=\"contentTopRightHeader\">            \n                            <SearchBar \n                                filterText={filterText} \n                                onFilter={handleFilterChange}\n                                inStockOnly={inStockOnly}\n                                shoppingContentCart={handleShoppingCart}\n                            />\n                            <Cart panier={handlePanier}/>\n                        </div>\n            </header>\n            <div className=\"contentTableProduct\">\n            {panier && <table>{tableCart}</table>}\n            {!panier && table}\n            </div>\n        </>\n    )\n}\n\nexport default FilterableProductTable;"]},"metadata":{},"sourceType":"module"}