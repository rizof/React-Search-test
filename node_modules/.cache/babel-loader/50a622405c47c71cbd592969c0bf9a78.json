{"ast":null,"code":"var _jsxFileName = \"/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js\";\nimport React, { useState } from 'react';\nimport ProductTable from './ProductTable.js';\nimport SearchBar from './SearchBar.js';\nimport ProductRow from './ProductRow.js';\nimport './FilterableProductTable.css';\nimport Column2 from './Column2.js';\nimport InfoUtileSpan from './InfoUtileSpan.js';\n\nfunction createTableProducts(categoriesAndProduct, categories) {\n  const table = [];\n  let isEmpty = Object.keys(categories).length;\n\n  for (const property in categoriesAndProduct) {\n    if (isEmpty === 0 || categories.includes(property)) table.push( /*#__PURE__*/React.createElement(ProductTable, {\n      category: property,\n      key: property,\n      rows: categoriesAndProduct[property],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  return table;\n}\n\nfunction listProductsAndCategories(products) {\n  const categoriesAndProduct = [];\n  let lastCategoriy = [];\n  products.map((product, index) => {\n    if (!lastCategoriy.includes(product.category)) {\n      lastCategoriy.push(product.category);\n      categoriesAndProduct[product.category] = [];\n    }\n\n    const name = product.stocked ? product.name : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 59\n      }\n    }, product.name);\n    const price = product.price;\n    categoriesAndProduct[product.category].push( /*#__PURE__*/React.createElement(ProductRow, {\n      key: index,\n      name: name,\n      price: price,\n      index: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }\n    }));\n    return categoriesAndProduct;\n  });\n  return categoriesAndProduct;\n}\n\nfunction FilterableProductTable({\n  productsObject\n}) {\n  const [filterText, setText] = useState(\"\");\n  const [inStockOnly, setStock] = useState(false);\n  const [products, setProducts] = useState(productsObject);\n  const [categories, setCategories] = useState([]);\n  const [cart, setCart] = useState([]);\n  const table = [];\n  let categoriesAndProduct = [];\n\n  const handleShoppingCart = function (index) {\n    setCart([...cart, productsObject[index]]);\n  };\n\n  const handleInFilterText = function (e) {\n    setText(e.target.value);\n  };\n\n  const handleInStockOnlyChange = function (e) {\n    setStock(e.target.checked);\n  };\n\n  const handleFilterChange = function (e) {\n    const result = productsObject.filter(product => {\n      if (e.currentTarget.type === \"checkbox\") {\n        handleInStockOnlyChange(e);\n        if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1) return false;\n        if (e.target.checked && !product.stocked) return false;\n      } else {\n        handleInFilterText(e);\n        if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1) return false;\n        if (inStockOnly && !product.stocked) return false;\n      }\n\n      return product;\n    });\n    setProducts(result);\n  };\n\n  categoriesAndProduct = listProductsAndCategories(products);\n  table.push(createTableProducts(categoriesAndProduct, categories));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTopRightHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    filterText: filterText,\n    onFilter: handleFilterChange,\n    inStockOnly: inStockOnly,\n    shoppingContentCart: cart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTableProduct\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, table[0].length === 0 ? /*#__PURE__*/React.createElement(InfoUtileSpan, {\n    info: \"Il n'y a pas de produit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 42\n    }\n  }) : table));\n}\n\nexport default FilterableProductTable;","map":{"version":3,"sources":["/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js"],"names":["React","useState","ProductTable","SearchBar","ProductRow","Column2","InfoUtileSpan","createTableProducts","categoriesAndProduct","categories","table","isEmpty","Object","keys","length","property","includes","push","listProductsAndCategories","products","lastCategoriy","map","product","index","category","name","stocked","price","FilterableProductTable","productsObject","filterText","setText","inStockOnly","setStock","setProducts","setCategories","cart","setCart","handleShoppingCart","handleInFilterText","e","target","value","handleInStockOnlyChange","checked","handleFilterChange","result","filter","currentTarget","type","toLowerCase","indexOf"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport ProductTable from './ProductTable.js' \nimport SearchBar from './SearchBar.js'\nimport ProductRow from './ProductRow.js'\nimport './FilterableProductTable.css'\nimport Column2 from './Column2.js'\nimport InfoUtileSpan from './InfoUtileSpan.js'\n\nfunction createTableProducts(categoriesAndProduct, categories){\n    const table = []\n    let isEmpty = Object.keys(categories).length\n    for (const property in categoriesAndProduct) {\n            if (isEmpty === 0|| categories.includes(property)) \n                table.push(\n                    <ProductTable \n                        category = {property}\n                        key={property}\n                        rows={categoriesAndProduct[property]}\n                    />\n                )\n     }\n     return table\n}\n\nfunction listProductsAndCategories (products) {\n    const categoriesAndProduct = []\n    let lastCategoriy = []\n\n    products.map((product, index) => {\n            if (!lastCategoriy.includes(product.category)){\n                lastCategoriy.push(product.category)\n                categoriesAndProduct[product.category] = []\n            }\n            const name = product.stocked ? product.name : <span className='danger'>{product.name}</span>\n            const price = product.price \n            categoriesAndProduct[product.category].push(\n                <ProductRow \n                    key={index} \n                    name={name}\n                    price={price}\n                    index={index}\n                />\n            )\n        return categoriesAndProduct\n    })\n    return categoriesAndProduct\n}\n\nfunction FilterableProductTable ({productsObject}) {\n    const [filterText, setText] = useState(\"\")\n    const [inStockOnly, setStock] = useState(false)\n    const [products, setProducts] = useState(productsObject)\n    const [categories, setCategories] = useState([])\n    const [cart, setCart] = useState([])\n    const table = [] \n    let categoriesAndProduct = []\n\n    const handleShoppingCart = function (index) {\n        setCart ([...cart, productsObject[index]])\n    }\n\n    const handleInFilterText = function (e) {\n        setText (e.target.value)\n    }\n\n    const handleInStockOnlyChange = function (e) {\n        setStock (e.target.checked)\n    }\n\n    const handleFilterChange = function (e) {\n        const result = productsObject.filter(product => {\n            if (e.currentTarget.type === \"checkbox\")\n            {\n                handleInStockOnlyChange(e)\n                if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1)\n                    return false\n                if (e.target.checked && !product.stocked)\n                    return false\n            }\n            else\n            {\n                handleInFilterText(e)\n                if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1)\n                return false\n                if (inStockOnly && !product.stocked)\n                    return false\n            }\n            return product    \n        })\n        setProducts(result)\n    }\n\n    categoriesAndProduct = listProductsAndCategories(products)\n    table.push(createTableProducts(categoriesAndProduct, categories))\n    return (\n        <>\n            <header>\n \n                        <div className=\"contentTopRightHeader\">            \n                            <SearchBar \n                                filterText={filterText} \n                                onFilter={handleFilterChange}\n                                inStockOnly={inStockOnly}\n                                shoppingContentCart={cart}\n                            />\n                            </div>\n            </header>\n            <div className=\"contentTableProduct\">\n                {table[0].length === 0 ? <InfoUtileSpan info={\"Il n'y a pas de produit\"}/> : table}\n            </div>\n        </>\n    )\n}\n\nexport default FilterableProductTable;"]},"metadata":{},"sourceType":"module"}