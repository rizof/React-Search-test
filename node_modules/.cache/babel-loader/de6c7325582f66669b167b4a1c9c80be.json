{"ast":null,"code":"var _jsxFileName = \"/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js\";\nimport React, { useState } from 'react';\nimport ProductTable from './ProductTable.js';\nimport SearchBar from './SearchBar.js';\nimport ProductRow from './ProductRow.js';\nimport './FilterableProductTable.css';\nimport InfoUtileSpan from './InfoUtileSpan.js';\n\nfunction createTableProducts(categoriesAndProduct, categories) {\n  const table = [];\n  let isEmpty = Object.keys(categories).length;\n\n  for (const property in categoriesAndProduct) {\n    if (isEmpty === 0 || categories.includes(property)) table.push( /*#__PURE__*/React.createElement(ProductTable, {\n      category: property,\n      key: property,\n      rows: categoriesAndProduct[property],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 21\n      }\n    }));\n  }\n\n  return table;\n}\n\nfunction listProductsAndCategories(products, handleShoppingCart) {\n  const categoriesAndProduct = [];\n  let lastCategoriy = [];\n  products.map((product, index) => {\n    if (!lastCategoriy.includes(product.category)) {\n      lastCategoriy.push(product.category);\n      categoriesAndProduct[product.category] = [];\n    }\n\n    const name = product.stocked ? product.name : /*#__PURE__*/React.createElement(\"span\", {\n      className: \"danger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 59\n      }\n    }, product.name);\n    const price = product.price;\n    categoriesAndProduct[product.category].push( /*#__PURE__*/React.createElement(ProductRow, {\n      key: index,\n      name: name,\n      price: price,\n      index: index,\n      addCart: handleShoppingCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }\n    }));\n    return categoriesAndProduct;\n  });\n  return categoriesAndProduct;\n}\n\nfunction FilterableProductTable({\n  productsObject\n}) {\n  const [filterText, setText] = useState(\"\");\n  const [inStockOnly, setStock] = useState(false);\n  const [products, setProducts] = useState(productsObject);\n  const [categories, setCategories] = useState([]);\n  const [cart, setCart] = useState([]);\n  const table = [];\n  let categoriesAndProduct = [];\n\n  const handleShoppingCart = function (index) {\n    console.log(cart, index, productsObject[index]);\n    setCart([...cart, productsObject[index]]);\n  };\n\n  const handleInFilterText = function (e) {\n    setText(e.target.value);\n  };\n\n  const handleInStockOnlyChange = function (e) {\n    setStock(e.target.checked);\n  };\n\n  const handleFilterChange = function (e) {\n    const result = productsObject.filter(product => {\n      if (e.currentTarget.type === \"checkbox\") {\n        handleInStockOnlyChange(e);\n        if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1) return false;\n        if (e.target.checked && !product.stocked) return false;\n      } else {\n        handleInFilterText(e);\n        if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1) return false;\n        if (inStockOnly && !product.stocked) return false;\n      }\n\n      return product;\n    });\n    setProducts(result);\n  };\n\n  console.log(cart);\n  categoriesAndProduct = listProductsAndCategories(products, handleShoppingCart);\n  table.push(createTableProducts(categoriesAndProduct, categories));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTopRightHeader\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SearchBar, {\n    filterText: filterText,\n    onFilter: handleFilterChange,\n    inStockOnly: inStockOnly,\n    shoppingContentCart: handleShoppingCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"contentTableProduct\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, table[0].length === 0 ? /*#__PURE__*/React.createElement(InfoUtileSpan, {\n    info: \"Il n'y a pas de produit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 42\n    }\n  }) : table));\n}\n\nexport default FilterableProductTable;","map":{"version":3,"sources":["/Users/rizof/Desktop/React-Search-test/src/FilterableProductTable.js"],"names":["React","useState","ProductTable","SearchBar","ProductRow","InfoUtileSpan","createTableProducts","categoriesAndProduct","categories","table","isEmpty","Object","keys","length","property","includes","push","listProductsAndCategories","products","handleShoppingCart","lastCategoriy","map","product","index","category","name","stocked","price","FilterableProductTable","productsObject","filterText","setText","inStockOnly","setStock","setProducts","setCategories","cart","setCart","console","log","handleInFilterText","e","target","value","handleInStockOnlyChange","checked","handleFilterChange","result","filter","currentTarget","type","toLowerCase","indexOf"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport ProductTable from './ProductTable.js' \nimport SearchBar from './SearchBar.js'\nimport ProductRow from './ProductRow.js'\nimport './FilterableProductTable.css'\nimport InfoUtileSpan from './InfoUtileSpan.js'\n\nfunction createTableProducts(categoriesAndProduct, categories){\n    const table = []\n    let isEmpty = Object.keys(categories).length\n    for (const property in categoriesAndProduct) {\n            if (isEmpty === 0|| categories.includes(property)) \n                table.push(\n                    <ProductTable \n                        category = {property}\n                        key={property}\n                        rows={categoriesAndProduct[property]}\n                    />\n                )\n     }\n     return table\n}\n\nfunction listProductsAndCategories (products, handleShoppingCart) {\n    const categoriesAndProduct = []\n    let lastCategoriy = []\n\n    products.map((product, index) => {\n            if (!lastCategoriy.includes(product.category)){\n                lastCategoriy.push(product.category)\n                categoriesAndProduct[product.category] = []\n            }\n            const name = product.stocked ? product.name : <span className='danger'>{product.name}</span>\n            const price = product.price \n            categoriesAndProduct[product.category].push(\n                <ProductRow \n                    key={index} \n                    name={name}\n                    price={price}\n                    index={index}\n                    addCart={handleShoppingCart}\n                />\n            )\n        return categoriesAndProduct\n    })\n    return categoriesAndProduct\n}\n\nfunction FilterableProductTable ({productsObject}) {\n    const [filterText, setText] = useState(\"\")\n    const [inStockOnly, setStock] = useState(false)\n    const [products, setProducts] = useState(productsObject)\n    const [categories, setCategories] = useState([])\n    const [cart, setCart] = useState([])\n    const table = [] \n    let categoriesAndProduct = []\n\n    const handleShoppingCart = function (index) {\n        console.log(cart, index, productsObject[index])\n\n        setCart ([...cart, productsObject[index]])\n    }\n\n    const handleInFilterText = function (e) {\n        setText (e.target.value)\n    }\n\n    const handleInStockOnlyChange = function (e) {\n        setStock (e.target.checked)\n    }\n\n    const handleFilterChange = function (e) {\n        const result = productsObject.filter(product => {\n            if (e.currentTarget.type === \"checkbox\")\n            {\n                handleInStockOnlyChange(e)\n                if (product.name.toLowerCase().indexOf(filterText.toLowerCase()) === -1)\n                    return false\n                if (e.target.checked && !product.stocked)\n                    return false\n            }\n            else\n            {\n                handleInFilterText(e)\n                if (product.name.toLowerCase().indexOf(e.target.value.toLowerCase()) === -1)\n                return false\n                if (inStockOnly && !product.stocked)\n                    return false\n            }\n            return product    \n        })\n        setProducts(result)\n    }\n    console.log(cart)\n    categoriesAndProduct = listProductsAndCategories(products, handleShoppingCart)\n    table.push(createTableProducts(categoriesAndProduct, categories))\n    return (\n        <>\n            <header>\n \n                        <div className=\"contentTopRightHeader\">            \n                            <SearchBar \n                                filterText={filterText} \n                                onFilter={handleFilterChange}\n                                inStockOnly={inStockOnly}\n                                shoppingContentCart={handleShoppingCart}\n                            />\n                            </div>\n            </header>\n            <div className=\"contentTableProduct\">\n                {table[0].length === 0 ? <InfoUtileSpan info={\"Il n'y a pas de produit\"}/> : table}\n            </div>\n        </>\n    )\n}\n\nexport default FilterableProductTable;"]},"metadata":{},"sourceType":"module"}